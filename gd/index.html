<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<meta charset="UTF-8">
<meta name="google" content="notranslate">
<meta http-equiv="Content-Language" content="en">

<head>
    <style>
    body {
        background-color: rgb(226, 231, 245);
      }
      
      h1 {
        color: rgb(80, 80, 121);
        margin-left: 40px;
        font-size: 5em;
        font-family: Arial, Helvetica, sans-serif;
      }

      h2 {
        color: rgb(23, 23, 24);
        margin-left: 40px;
        font-size: 4em;
        font-family: Arial, Helvetica, sans-serif;
      }

      button {
        background-color: #3867f5;
        color: white;
        padding: 175px 172px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 56px;
        border-radius: 22px;
        border-width: 10px;
        font-family: Arial, Helvetica, sans-serif;
        }
      
        #status_button {
            padding: 100px 172px;
            background-color: #90a9f4;
        }

      #buttons {
        text-align: center;
      }

    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            var pin = atob("MzMzOA");
            var url =
                "https://e3iufr3anrv6swjysbxqvfdpny0lzjib.lambda-url.us-east-1.on.aws/";
            $.get(url, {action: "get_status"}, function(data, status) {
                $("#curr_status").html(data.state);
            })
            $("#open_button").click(function () {
                $.post(
                    url,
                    {
                        "action": "open",
                        "mode": "nontest_mode",
                        "pin": pin
                    },
                    function (data, status) {
                        $("#curr_status").html(data.state);
                        console.log(JSON.stringify(data));
                    }
                );
            });
            $("#close_button").click(function () {
                $.post(
                    url,
                    {
                        "action": "close",
                        "mode": "nontest_mode",
                        "pin": pin
                    },
                    function (data, status) {
                        $("#curr_status").html(data.state);
                        console.log(JSON.stringify(data));
                    }
                );
            });
            $("#status_button").click(function (e) {
                $("#curr_status").html("loading...")
                $.get(
                    url,
                    {
                        action: "get_status",
                    },
                    function (data, status) {
                        $("#curr_status").html(data.state);
                    }
                );
            });
        });
    </script>
</head>

<body>
    <h1>Garage Door Opener</h1>
    <div><h2>Door status:<div id="curr_status">Loading...</div></h2></div>
    <div id="buttons">
        <button id="status_button">Status</button>
        <br>
        <button id="open_button">Open</button>
        <br>
        <button id="close_button">Close</button>
    </div>
</body>

</html>